{% extends "base.html" %}
{% load static %}

{% block content %}

    <!-- Google Tag Manager -->
    <script>
        (function(w,d,s,l,i) {
            w[l]=w[l]||[];
            w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),
                dl=l!='dataLayer'?'&l='+l:'';
            j.async=true;
            j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
            f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-PM7B8FRC');
    </script>
    <!-- End Google Tag Manager -->

    <!-- Google Analytics Script -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-PHX82QGLW4"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-PHX82QGLW4');
    </script>
    <!-- End Google Analytics Script -->

    <!-- Display Google Analytics Data -->
    <div class="admin-container">
        <div class="admin-sidebar">
            <div class="option-button">
                <a href="#analytics" onclick="loadAnalyticsData()">Analytics</a>
            </div>
            <div class="option-button">
                <a href="#manage-users">Manage Users</a>
            </div>
            <div class="option-button">
                <a href="#manage-reviews">Manage Reviews</a>
            </div>
            <div class="option-button">
                <a href="#manage-gallery">Manage Gallery Images</a>
            </div>
            <div class="option-button">
                <a href="#template-edits">Template Edits</a>
            </div>
        </div>

        <div class="analytics-data" id="analyticsDataContainer">
            <h3>Analytics Data</h3>
            <p>Total Visitors: <span id="totalVisitors"></span></p>
            <p>Page Views: <span id="pageViews"></span></p>
            <canvas id="analyticsChart" width="400" height="200"></canvas>
        </div>
        
    </div>

    <!-- JavaScript Function to Load Analytics Data -->
    <script>
        function loadAnalyticsData() {
            // Make API request to fetch analytics data
            // Example: Replace this with actual API request to Google Analytics
            fetch('/api/analytics') // Assuming API endpoint to fetch analytics data
                .then(response => response.json())
                .then(data => {
                    // Display analytics data in the container
                    const analyticsDataContainer = document.getElementById('analyticsDataContainer');
                    analyticsDataContainer.innerHTML = '<h3>Analytics Data</h3>';
                    // Manipulate 'data' object to display specific metrics or charts
                })
                .catch(error => {
                    console.error('Error fetching analytics data:', error);
                });
        }
    </script>
{% endblock %}
